function ready(e){if(document.readyState!="loading"){e()}else{document.addEventListener("DOMContentLoaded",e)}}function createDatabase(e){let t={database:Array()};for(let a in e){t.database.push({id:parseInt(a),added:undefined,owned:e[a][0],title:e[a][1],type:e[a][2],variant:e[a][3],skill:e[a][4],school:e[a][5],difficulty:e[a][6],quest:e[a][7],dlc:e[a][8],extra:e[a][9],location:e[a][10]})}console.log("Database created");localStorage.setItem("database",JSON.stringify(t));buildCheckList()}function initDatabase(){if(localStorage.getItem("database")!==null){console.log("Database exists");buildCheckList()}else{console.log("Database does not exists!");fetch("database.json").then(e=>e.json()).then(e=>createDatabase(e))}}function addEvents(){console.time("Events added");let e=new bootstrap.Modal(document.getElementById("item-detail-modal"));Array.from(document.querySelectorAll("#checklist .list-group-item > div > div:not(.form-check-input-container)")).forEach(t=>{t.addEventListener("click",t=>{let a=JSON.parse(localStorage.getItem("database")),n=t.currentTarget.parentElement.parentElement.dataset,d=a.database[n.id];document.getElementById("item-detail-title").textContent="("+n.type+") "+d.title;document.getElementById("item-detail-variant").textContent=d.variant;document.getElementById("item-detail-dlc").textContent=d.dlc;document.getElementById("item-detail-owned").textContent=d.owned?"Added: "+d.added:"Not owned yet";document.getElementById("item-detail-skill").textContent=d.skill;document.getElementById("item-detail-school").textContent=d.school;document.getElementById("item-detail-difficulty").textContent=d.difficulty;document.getElementById("item-detail-quest").textContent=d.quest;document.getElementById("item-detail-extra").textContent=d.extra;document.getElementById("item-detail-location").textContent=d.location;e.show();console.log("CLICK",d);t.preventDefault()})});Array.from(document.querySelectorAll("#checklist .form-check-input")).forEach(e=>{e.addEventListener("change",e=>{let t=JSON.parse(localStorage.getItem("database")),a=e.target;if(a.checked){let e=Intl.DateTimeFormat("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}).format(new Date);t.database[a.dataset.id].owned=a.checked;t.database[a.dataset.id].added=e;a.parentElement.parentElement.querySelector(".date-added").textContent="Added: "+e;localStorage.setItem("database",JSON.stringify(t))}else{if(localStorage.getItem("dont-ask-uncheck-setting")===null||localStorage.getItem("dont-ask-uncheck-setting")==="false"){a.checked=true;areYouSureModal.show();document.getElementById("are-you-sure-item-details").innerHTML="<strong>"+t.database[a.dataset.id].title+"</strong>, added "+t.database[a.dataset.id].added;document.getElementById("are-you-sure-modal").addEventListener("hide.bs.modal",()=>{document.getElementById("are-you-sure-confirm").addEventListener("click",()=>{t.database[a.dataset.id].owned=false;t.database[a.dataset.id].added=undefined;a.parentElement.parentElement.querySelector(".date-added").textContent="Not owned yet";localStorage.setItem("database",JSON.stringify(t));a.checked=false;if(document.getElementById("are-you-sure-checkbox").checked){localStorage.setItem("dont-ask-uncheck-setting",true);document.getElementById("dont-ask-uncheck-setting").checked=true}},{once:true})},{once:true})}else{t.database[a.dataset.id].owned=false;t.database[a.dataset.id].added=undefined;a.parentElement.parentElement.querySelector(".date-added").textContent="Not owned yet";localStorage.setItem("database",JSON.stringify(t))}}})});console.timeEnd("Events added")}function buildCheckList(){console.time("Checklist built");let e=JSON.parse(localStorage.getItem("database"));document.getElementById("checklist").innerHTML=tmpl("tmpl-book",e);document.querySelectorAll(".list-group-item[data-type='b']").forEach(e=>{e.classList.remove("d-none")});console.timeEnd("Checklist built");addEvents()}function showItems(e){document.querySelectorAll(".list-group-item").forEach(e=>{e.classList.add("d-none")});document.querySelectorAll(".list-group-item[data-type='"+e+"']").forEach(e=>{e.classList.remove("d-none")})}let areYouSureModal,offcanvas=new bootstrap.Offcanvas(document.getElementById("menu-offcanvas"));ready(function(){try{localStorage.setItem("supportTest",true);localStorage.removeItem("supportTest");console.log("localStorage is supported");initDatabase()}catch(l){console.log("localStorage is NOT supported")}document.querySelectorAll(".menu-link").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault();if(e.currentTarget.hasAttribute("data-type")){document.getElementById("menu-title").textContent=e.currentTarget.querySelector(".menu-link-title").textContent;document.querySelectorAll(".menu-link.active").forEach(e=>{e.classList.remove("active")});document.querySelectorAll(".menu-link[data-type="+e.currentTarget.dataset.type+"]").forEach(e=>{e.classList.add("active")});document.getElementById("settings").classList.add("d-none");showItems(e.currentTarget.dataset.type)}else{document.getElementById("menu-title").textContent="Settings";document.querySelectorAll(".menu-link.active").forEach(e=>{e.classList.remove("active")});document.querySelectorAll(".menu-link.goto-settings").forEach(e=>{e.classList.add("active")});document.querySelectorAll(".list-group-item").forEach(e=>{e.classList.add("d-none")});document.getElementById("settings").classList.remove("d-none")}offcanvas.hide()})});document.getElementById("menu-toggle-offcanvas").addEventListener("click",e=>{e.stopPropagation();e.preventDefault();offcanvas.show()});let e=0;let t=0;const a=document;a.addEventListener("touchstart",function(t){e=t.changedTouches[0].screenX},false);a.addEventListener("touchmove",function(e){t=e.changedTouches[0].screenX;n()},false);function n(){if(t<=e){console.log("Swiped left",e-t)}if(t>=e){console.log("Swiped right",t-e)}}if(localStorage.getItem("dont-ask-uncheck-setting")!==null&&localStorage.getItem("dont-ask-uncheck-setting")=="true"){document.getElementById("dont-ask-uncheck-setting").checked=true}areYouSureModal=new bootstrap.Modal(document.getElementById("are-you-sure-modal"));document.getElementById("dont-ask-uncheck-setting").addEventListener("change",e=>{localStorage.setItem("dont-ask-uncheck-setting",e.target.checked)});document.getElementById("are-you-sure-modal").addEventListener("show.bs.modal",()=>{if(localStorage.getItem("dont-ask-uncheck-setting")===null){document.getElementById("are-you-sure-checkbox").checked=false}else{document.getElementById("are-you-sure-checkbox").checked=localStorage.getItem("dont-ask-uncheck-setting")=="true"}});if(localStorage.getItem("dark-mode-setting")===null){localStorage.setItem("dark-mode-setting",true)}if(localStorage.getItem("dark-mode-setting")=="false"){document.getElementById("dark-mode-setting").checked=false;Array.from(document.querySelectorAll("[data-dark-mode]")).forEach(e=>{e.classList.replace("bg-dark","bg-light");e.classList.replace("text-light","text-dark");e.classList.replace("navbar-dark","navbar-light");e.dataset.darkMode=false;e.setAttribute("data-dark-mode",false)})}document.getElementById("dark-mode-setting").addEventListener("change",e=>{let t=e.target.checked;localStorage.setItem("dark-mode-setting",t);Array.from(document.querySelectorAll("[data-dark-mode]")).forEach(e=>{if(t){e.classList.replace("bg-light","bg-dark");e.classList.replace("text-dark","text-light");e.classList.replace("navbar-light","navbar-dark")}else{e.classList.replace("bg-dark","bg-light");e.classList.replace("text-light","text-dark");e.classList.replace("navbar-dark","navbar-light")}e.dataset.darkMode=t;e.setAttribute("data-dark-mode",t)})});let d=new bootstrap.Toast(document.getElementById("delete-confirmed-toast")),o=new bootstrap.Toast(document.getElementById("no-action-toast"));document.getElementById("confirm-delete-database-modal").addEventListener("hide.bs.modal",e=>{if(e.explicitOriginalTarget.id=="confirm-delete-database-yes"){localStorage.removeItem("database");d.show();o.hide()}else{o.show();d.hide()}});[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(e=>{new bootstrap.Tooltip(e)})});
//# sourceMappingURL=main.min.js.map